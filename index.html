
<meta property="og:title" content="Elecciones en Venezuela 2024| Mapa de Resultados" />
<meta property="og:description" content="Resultados de las elecciones presidenciales en Venezuela de la base de datos Con Venezuela. Por una Venezuela libre" />
<meta property="og:image" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="" />
<title>Elecciones en Venezuela | Mapa de Resultados</title>
<link rel="stylesheet" href="./styles/styles.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
crossorigin=""></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<script src="leaflet-ajax-gh-pages\dist\leaflet.ajax.js"></script>
</head>
<body>
<section class="main-container">
    <h1>Elecciones en Venezuela 2024 | Mapa de Resultados</h1>
    <section class="message">
        <p><b>Fuente:</b> base de datos de las votaciones presidenciales del <b>28 de julio de 2024</b> publicados por el equipo de María Corina Machado y Edmundo González en el sitio web <a href="https://resultadosconvzla.com/">resultadosconvzla.com</a></p>
    </section>
    <div id="map"></div>

</section>    
<footer class="footer">
        <img src="https://res.cloudinary.com/arawato666/image/upload/v1691507746/leomedina_web/logo-leo_kvdtus.png"
         alt="logo leo medina">
        <span>2024 - Todos los derechos reservados.</span>
      </footer>
</body>
<script>
var map = L.map('map').setView([5.1632955, -69.4146705], 6);


// map limits
var southWest = L.latLng(-4.0, -80.0); 
var northEast = L.latLng(15.0, -55.0); 
var bounds = L.latLngBounds(southWest, northEast);

map.setMaxBounds(bounds);
map.on('drag', function() {
    map.panInsideBounds(bounds, { animate: false });
});

// osm layer
var osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
maxZoom: 7,
minZoom: 6,
attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
});
osm.addTo(map);

// thunderforest
var new_tile = L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	subdomains: 'abcd',
maxZoom: 8,
minZoom: 6,
});
new_tile.addTo(map);

// selected feature and popup information
var selectedLayer = null;

function onEachFeature(features, layer) {
    if (features.properties) {
        layer.on('click', function(e) {
            if (selectedLayer) {
                geojsonLayer.resetStyle(selectedLayer);
            }
            selectedLayer = layer;
            layer.setStyle({
                fillColor: 'yellow'
            });
            var popupContent = "Municipio: " + features.properties.Nomb_Mcpio + "<br>"+ 
                               "Estado: " + features.properties.Nom_Estado + "<br>"+ 
                               "Edmundo González: " + features.properties.db_suma_EG + " (" + features.properties.db_porc_EG.toFixed(2) + "%)" + "<br>"+ 
                               "Nicolás Maduro: " + features.properties.db_suma_NM + " (" + features.properties.db_porc_NM.toFixed(2) + "%)" + "<br>"+ 
                               "Otros candidatos: " + features.properties.db_total_o + " (" + features.properties.db_porc_ot.toFixed(2) + "%)";
            layer.bindPopup(popupContent).openPopup();
            L.DomEvent.stopPropagation(e);
        });
    }
}

/// color gradient
function getColor(d) {
    return d > 80 ? '#034e7b' :
           d > 70  ? '#0570b0' :
           d > 60  ? '#3690c0' :
           d > 50  ? '#74a9cf' :
           d > 40  ? '#a6bddb' :
           d > 30  ? '#d0d1e6' :
           d > 20  ? '#ece7f2' :
           d > 10  ? '#fff7fb' :
                     '#00000';
}

function style(features) {
    return {
        fillColor: getColor(features.properties.db_porc_EG),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.8
    };
}

// adding geojson to map
var geojsonLayer = new L.geoJson.ajax("https://raw.githubusercontent.com/leomed512/files/master/prueba_union.geojson", {
    style: style,
    onEachFeature: onEachFeature
}).addTo(map);

// reset style for unselected feature
map.on('click', function(e) {
    if (selectedLayer) {
        geojsonLayer.resetStyle(selectedLayer);
        selectedLayer = null;
    }
});

// layers
var basemaps = {
    "Resultados municipales": geojsonLayer,
};
L.control.layers(basemaps).addTo(map);

var legend = L.control({position: 'bottomleft'});

// leyend
legend.onAdd = function (map) {
    var div = L.DomUtil.create('div', 'legend-horizontal');
    div.innerHTML = '<div class="legend-title">Votos por Edmundo González (%)</div>' +
                    '<div class="gradient-bar"></div>' +
                    '<div class="labels">' +
                    '<span>>80</span><span>70</span><span>60</span><span>50</span><span>40</span><span>30</span><span>20</span><span>10</span><span>Sin datos</span>' +
                    '</div>';
    return div;
};

legend.addTo(map);
</script>

</html> 